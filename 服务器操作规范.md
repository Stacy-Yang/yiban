## 中南易班2017

### 要求
#### ssh key
1.  入门Linux：鸟哥的Linux私房菜.基础学习篇（第三版）个人认为鸟哥的这本书是一本非常好的入门书
2.  熟悉至少一个内置编辑器: vi, nano
3.  至少熟悉一个发行版(或系列)，建议作为服务器常用的如Centos, Debian, Ubuntu，可以了解多个常用发行版
4.  个人使用/开发尽量在Linux上
5.  熟悉windows与linux之间相连接的工具.vnc，winscp,xshell,putty.熟悉ssh工具及配置
```
sudo chmod -R
```
6.  服务器配置安装部分：熟悉最常用 的ftp,http,php,apache,dns,mail的一般配置方法。
7.  `危险操作前一定要备份（操作均需要备份）`
- rm -rf dir/filename  
-   kill -9 pid   
- 数据库相关 （delete，drop，truncate） 操作前一定备份数据）
```
系统或软件从官方渠道下载
禁用目录浏览，敏感文件数据禁止放在web目录下面
（包括svn，cvs版本控制的文件）
```

### 账号

-  非必要情况下，以非root用户登录操作
- 密码建议自己备份，但不要外漏。若有修改密码的需求则报给组长，等组长回复
### 端口
- 限制端口访问机器
- 禁止修改登录端口
### 监控
- 开启监控 比如开启监控日志，nginx，apache默认自带开启日志
- 学会查看日志解决问题
### 数据库
#### phpmyadmin
+ 学会最基本的sql语言（增删查改）
+ 绑定内网ip
+ 设置登录密码
+ 删除默认数据库及用户
+ 新建mysql用户和组，相关权限给到mysql用户
+ 库，表级别操作慎重
### 网站搭建
- php CI
    - 搭建php环境（php mysql apache）
    - 上传代码并给相应目录权限
    - 修改application/config.php里面的$config['base_url']成`http://域名/文件夹`
    - 修改数据库配置application/database.php
      - 数据库地址
      - 用户名
      - 密码
- .net 随缘
### 代码更新
```
git
```
`每次更新的时候检查目录下面有没有备份的数据库和代码`
#### 服务器更新
##### 可以访问外网的服务器：
  - 配置ssh key，使用git pull
##### 不能访问外网的服务器
```
git log
git log --stat
git diff --name-only OLD_COMMIT_ID_HERE NEW_COMMIT_ID_HERE
git diff --name-status OLD_COMMIT_ID_HERE NEW_COMMIT_ID_HERE
    - M : modify
    - A : ADD
    - D : DELETE
```
- 在每个项目的根目录下面的update.txt文件里添加写入
```
操作人姓名-电话-邮箱-修改日期-git版本号
```
- 更新完成之后一定要多访问几次确保没有出问题
- 所有的服务更新完需要重启服务
- 建议更新时间选在访问人数较少的深夜
#### 实用技巧
1. 导出最后一次提交修改过的文件

```
git archive -o ../updated.zip HEAD
git diff --name-only HEAD^
```
2. 导出两次提交之间修改过的文件
```
git archive -o ../latest.zip NEW_COMMIT_ID_HERE
git diff --name-only OLD_COMMIT_ID_HERE NEW_COMMIT_ID_HERE
```
## 退出
- windows：注销（`禁止使用关闭`）
- linux：logout(`禁止使用shut down`)
## 作业
